G.Graphic.MovablePoint=G.Graphic.Point.extend({init:function(t,i,n){var o=this;G.Graphic.Point.prototype.init.call(o,t,i,n),o.options.duration=o.options.duration||2e3},start:function(){var t=this;return t._i||(t._i=1),t._move(),t},stop:function(){var t=this;return t._tid&&clearTimeout(t._tid),t},setRoute:function(t){var i=this;return i._setChunk(t),i},_setChunk:function(t){var i,n,o,e,r,u,a,s,_,h,p,c=this,f=c.options.duration,v=t.length,d=0,l=[],m=c._pts=[];for(h=0;h<v-1;h++)s=t[h],_=t[h+1],i=G.MathUtil.calcDistance(s,_),l.push(i),d+=i;for(h=0;h<v-1;h++)for(r=f*(l[h]/d)/30,o=t[h],e=t[h+1],u=(e[0]-o[0])/r,a=(e[1]-o[1])/r,p=0;p<r;p++)n=[o[0]+u*p,o[1]+a*p],m.push(n);return m.push([t[v-1][0],t[v-1][1]]),m},_move:function(){var t=this,i=t._pts,n=i.length,o=t._layer._map;t._updateGeom(i[t._i]),o._requestRedraw(),t._i++,t._tid=setTimeout(function(){t._i===n?t.stop():t._move()},30)}});