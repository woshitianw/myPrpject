G.Graphic.Anim={options:{duration:2,repeatCount:-1},play:function(){var i=this,t=i._layer;if(!t)return i;if(i._playing)return i;i._playing=!0;var n=1e3*i.options.duration,o=i.options.repeatCount;return i._startAt=+new Date,i._endAt=o>0?i._startAt+n*o:null,clearTimeout(i._tid),i._tid=setTimeout(function(){i._onStep()},30),i},stop:function(){var i=this;return i._playing=!1,clearTimeout(i._tid),i},_onStep:function(){var i,t,n=this,o=(n._layer,+new Date);n._playing&&(n._endAt&&o>n._endAt?n._final():(i=1e3*n.options.duration,t=(o-n._startAt)%i/i,n._interpolate(t),clearTimeout(n._tid),n._tid=setTimeout(function(){n._onStep()},30)))},_final:function(){var i=this,t=i._toGraphic;i.updateGeom(t.geom),i.updateOptions(t.options),i._playing=!1},_interNum:function(i,t,n){return i+(t-i)*n},_interArr:function(i,t,n){if(i&&t){var o,r,e,a=[],l=Math.min(i.length,t.length);for(o=0;o<l;o++)r=i[o],e=t[o],a[o]=this._interNum(r,e,n);return a}},_interColor:function(i,t,n){var o=G.Util.colorRgb,r=o(i),e=o(t),a=this._interArr(r,e,n);return G.Util.colorHex(a[0],a[1],a[2])},_interpolate:function(i){},_onStartEdit:function(){},_onEndEdit:function(){}},G.Graphic.AnimCircle=G.Graphic.Circle.extend({mixins:[G.Graphic.Anim],init:function(i,t,n){var o=this,r=G.Graphic.Circle;if(!(i instanceof r&&t instanceof r))throw new Error("Type error");o.options=G.Util.merge({},o.options,i.options,n),o._fromGraphic=i,o._toGraphic=t},_interpolate:function(i){var t,n,o=this,r=o._fromGraphic,e=o._toGraphic,a=o._interArr(r.geom,e.geom,i),l=r.options,p=e.options,h=G.Util.merge({},l),c=["outlineDashArray","fillImageSize"],f=["outlineWidth","outlineOpacity","fillOpacity"],_=["outlineColor","fillColor"];for(t=c.length-1;t>=0;t--)n=c[t],n&&(h[n]=o._interArr(l[n],p[n],i));for(t=f.length-1;t>=0;t--)n=f[t],n&&(h[n]=o._interNum(l[n],p[n],i));for(t=_.length-1;t>=0;t--)n=_[t],n&&(h[n]=o._interColor(l[n],p[n],i));o.updateGeom(a),o.updateOptions(h)}}),G.Graphic.AnimPoint=G.Graphic.Point.extend({mixins:[G.Graphic.Anim],init:function(i,t,n){var o=this,r=G.Graphic.Point;if(!(i instanceof r&&t instanceof r))throw new Error("Type error");o.options=G.Util.merge({},o.options,i.options,n),o._fromGraphic=i,o._toGraphic=t},_interpolate:function(i){var t,n,o=this,r=o._fromGraphic,e=o._toGraphic,a=o._interArr(r.geom,e.geom,i),l=r.options,p=e.options,h=G.Util.merge({},l),c=["size","offset","fillImageSize"],f=["imageRotate","outlineWidth","outlineOpacity","fillOpacity"],_=["outlineColor","fillColor"];for(t=c.length-1;t>=0;t--)n=c[t],n&&(h[n]=o._interArr(l[n],p[n],i));for(t=f.length-1;t>=0;t--)n=f[t],n&&(h[n]=o._interNum(l[n],p[n],i));for(t=_.length-1;t>=0;t--)n=_[t],n&&(h[n]=o._interColor(l[n],p[n],i));o.updateGeom(a),o.updateOptions(h)}}),G.Graphic.AnimPolygon=G.Graphic.Polygon.extend({mixins:[G.Graphic.Anim],init:function(i,t,n){var o=this,r=G.Graphic.Polygon;if(!(i instanceof r&&t instanceof r))throw new Error("Type error");o.options=G.Util.merge({},o.options,i.options,n),o._fromGraphic=i,o._toGraphic=t},_interpolate:function(i){var t,n,o,r,e,a,l,p,h=this,c=h._fromGraphic,f=h._toGraphic,_=c.geom,s=f.geom,u=[],m=Math.min(_.length,s.length);for(a=0;a<m;a++){for(t=_[a],n=s[a],o=[],p=Math.min(t.length,n.length),l=0;l<p;l++)r=t[l],e=n[l],o[l]=h._interArr(r,e,i);u[a]=o}var a,g,d=c.options,y=f.options,A=G.Util.merge({},d),v=["outlineDashArray","fillImageSize"],C=["outlineWidth","outlineOpacity","fillOpacity"],O=["outlineColor","fillColor"];for(a=v.length-1;a>=0;a--)g=v[a],g&&(A[g]=h._interArr(d[g],y[g],i));for(a=C.length-1;a>=0;a--)g=C[a],g&&(A[g]=h._interNum(d[g],y[g],i));for(a=O.length-1;a>=0;a--)g=O[a],g&&(A[g]=h._interColor(d[g],y[g],i));h.updateGeom(u),h.updateOptions(A)}}),G.Graphic.AnimPolyline=G.Graphic.Polyline.extend({mixins:[G.Graphic.Anim],init:function(i,t,n){var o=this,r=G.Graphic.Polyline;if(!(i instanceof r&&t instanceof r))throw new Error("Type error");o.options=G.Util.merge({},o.options,i.options,n),o._fromGraphic=i,o._toGraphic=t},_interpolate:function(i){var t,n,o,r=this,e=r._fromGraphic,a=r._toGraphic,l=e.geom,p=a.geom,h=[],c=Math.min(l.length,p.length);for(o=0;o<c;o++)t=l[o],n=p[o],h[o]=r._interArr(t,n,i);var o,f,_=e.options,s=a.options,u=G.Util.merge({},_),m=["lineDashArray"],g=["lineWidth","lineOpacity"],d=["lineColor"];for(o=m.length-1;o>=0;o--)f=m[o],f&&(u[f]=r._interArr(_[f],s[f],i));for(o=g.length-1;o>=0;o--)f=g[o],f&&(u[f]=r._interNum(_[f],s[f],i));for(o=d.length-1;o>=0;o--)f=d[o],f&&(u[f]=r._interColor(_[f],s[f],i));r.updateGeom(h),r.updateOptions(u)}});